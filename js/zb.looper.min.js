function LoopBid(){LoopEs.call(this,!1),this.dynamicAd=1,this.adsPending={amazon:[]},this.timeKeyBiddersExpected={},this.timeKeyBiddersReceived={},this.bidSlots={},this.bidData={},this.refreshTimers={},this.thisRunSlots={},this.zergCat=!1,this.zsource=!1,this.renderEventHandlerAdded=!1,this.impressionEventHandlerAdded=!1,this.refreshVisibleAds=!0,this.useBidPosAdSlot=!1,this.isDev=!1,document.location.search&&0<document.location.search.indexOf("loopdev=1")&&(this.isDev=!0),this.auctionTimeout={},"function"==typeof this.loadGoogleAds&&googletag.cmd.push(this.loadGoogleAds.bind(this))}function LoopAds(e){LoopBid.call(this),this.dfpId="/49671895/Looper",e&&void 0!==e.adUnit&&(this.dfpId=e.adUnit),e&&void 0!==e.adUnitAppend&&(this.dfpId=this.dfpId+"/"+e.adUnitAppend,this.useBidPosAdSlot=!0),e&&"function"==typeof e.ready&&e.ready.call(),this.xandrTags={"728x90":5421287,"300x250":5421280,"300x600":24812459,"320x50":5421343},this.indexTags={"728x90":843235,"300x250":843234,"300x600":843233,"320x50":843236},this.kargoSlots={"300x250":"_bYH0p8DVrz","320x50":"_a607NxHm7Q"},this.pubmaticTags={"320x50":"4573950","728x90":"4573949","300x250":"4573948","300x600":"4573947"},this.openXUnit="557059969",this.rubiconTags={desktop:{site:435538,"300x600":2493030,"300x250":2493032,"728x90":2493034},tablet:{site:435538,"300x600":2493030,"300x250":2493032,"728x90":2493034},mobile:{site:435540,"320x50":2493036,"300x250":2493386}},this.yahooTags={site:"8a96983701828282988783d55cf80074","728x90":"8a96983701828282988783d620770079","300x600":"8a96983701828282988783d5c1790077","320x50":"8a96983701828282988783d5ef5f0078","300x250":"8a96983701828282988783d58cc60076"},this.sharethroughTags={"300x250":"eR6N22RGhVhj2Oi8EvxPrDLD","300x600":"UjtID180txgQSTRJFyjNhI9p","728x90":"NjyC7Ft2Qhlc94l0LqWopthm","320x50":"fZC6IjPubeydHUE2e2r1BmKX"}}LoopBid.prototype=Object.create(LoopEs.prototype),Object.defineProperty(LoopBid.prototype,"constructor",{}),LoopBid.prototype.expectBid=function(e){return this.timeKeyBiddersExpected[e]=1,!0},LoopBid.prototype.registerBid=function(e){return this.timeKeyBiddersReceived[e]=1,"function"==typeof this.checkAuctionCallback&&this.getCount(this.timeKeyBiddersExpected)==this.getCount(this.timeKeyBiddersReceived)&&this.auctionTimeout&&(this.isDev&&console.log("Auction success early"),clearTimeout(this.auctionTimeout),this.auctionTimeout=!1,this.checkAuctionCallback.call(this)),!0},LoopBid.prototype.storeAuctionData=function(e){return delete this.bidData[e.adId],delete this.bidSlots[e.adId],!0},LoopBid.prototype.dfpSlotRendered=function(e){for(var t in googletag.definedSlots)googletag.definedSlots.hasOwnProperty(t)&&void 0!==googletag.definedSlots[t]&&"function"==typeof googletag.definedSlots[t].setTargeting&&(googletag.definedSlots[t].setTargeting("amznbid",""),googletag.definedSlots[t].setTargeting("amzniid",""));setTimeout(function(){var e=this.event.slot.getSlotElementId();if(e&&void 0!==this.instance.adsPending.amazon)for(var t=this.instance.adsPending.amazon.length;0<=t;t--)this.instance.adsPending.amazon[t]==e&&this.instance.adsPending.amazon.splice(t,1)}.bind({instance:this,event:e}),1e3)},LoopBid.prototype.dfpImpressionViewable=function(e){var t=e.slot.getSlotElementId();t=document.getElementById(t);Looper.attachRefreshAd(t,e,!0)},LoopBid.prototype.slotVisibilityChanged=function(e){var t=e.slot.getSlotElementId();t=document.getElementById(t);Looper.attachRefreshAd(t,e,!0)},LoopBid.prototype.attachRefreshAd=function(e,t,i){this.wWidth;var o,s,d=e.getAttribute("data-ad-pos"),r=e.id;s=t&&void 0!==t.inViewPercentage?t.inViewPercentage:this.isInView(e).pct,i=i||!1,this.refreshVisibleAds&&"floating"!=d&&"adhesion-top"!=d&&"adhesion-bottom"!=d&&(d=Date.now()/1e3,50<=s?(void 0===this.refreshTimers[r]&&(this.refreshTimers[r]={id:r,timer:!1,start:d,timeLeft:!1,el:e,iter:0,dfp:i}),!this.refreshTimers[r].timer&&this.refreshTimers[r].iter<3&&((!this.refreshTimers[r].timeLeft||this.refreshTimers[r].timeLeft<0)&&(o=30,this.refreshTimers[r].start&&(o=30-(d-this.refreshTimers[r].start)),this.refreshTimers[r].timeLeft=o=o<0?30:o),this.refreshTimers[r].start=d,this.refreshTimers[r].timer=setTimeout(this.refreshAd.bind(this.refreshTimers[r]),1e3*this.refreshTimers[r].timeLeft),this.isDev&&console.log(r+" timer created: "+this.refreshTimers[r].timeLeft+" sec"))):void 0!==this.refreshTimers[r]&&this.refreshTimers[r].timer&&(((o=this.refreshTimers[r].timeLeft-(d-this.refreshTimers[r].start))<0||30<o)&&(o=30),clearTimeout(this.refreshTimers[r].timer),this.refreshTimers[r].start=d,this.refreshTimers[r].timeLeft=o,this.refreshTimers[r].timer=!1,this.isDev&&console.log(r+" timer paused: "+this.refreshTimers[r].timeLeft+" sec remaining")))},LoopBid.prototype.dfpImpressionViewable=function(e){var t=e.slot.getSlotElementId();t=document.getElementById(t);Looper.attachRefreshAd(t,e,!0)},LoopBid.prototype.slotVisibilityChanged=function(e){var t=e.slot.getSlotElementId();t=document.getElementById(t);Looper.attachRefreshAd(t,e,!0)},LoopBid.prototype.refreshAd=function(e){e||void 0===this.timer||(e=this);var t=Math.floor(Date.now()/1e3)-this.start;Looper.isDev&&console.log(this.id+" timer complete.  Seconds elapsed: "+t),clearTimeout(e.timer),e.start=!1,e.timeLeft=!1,e.timer=!1,Looper.isInView(e.el).partial&&(Looper.isDev&&console.log(this.id+" ad visible, refreshed."),this.iter++,(t={})[e.el.id]=Looper.getBidSizes(e.el.getAttribute("data-ad-pos")),Looper.runAuction(t,!0))},LoopBid.prototype.round=function(e,t){var i,o,s;return t|=0,o=(e*=i=Math.pow(10,t))%1==.5*(s=0<e|-(e<0)),t=Math.floor(e),o&&(e=t+(0<s)),(o?e:Math.round(e))/i},LoopBid.prototype.roundStep=function(e,t){return t=t||1,Math.round(e*(1/t))},LoopBid.prototype.roundAdBid=function(e){var t=0;return"-1"===(t=(e=parseFloat(e))<20?e-Math.floor(e)==0?Math.floor(e):this.round(e,1).toFixed(1):20).toString().indexOf(".0")?Math.floor(e):t},LoopBid.prototype.getBidSizes=function(e){this.updateW();var t,i=this.wWidth;return"footer"==e&&"mobile"==this.device?t=[[300,250],[336,280],[320,100],[320,50]]:"1x3"==e?t=[[1,3]]:"1x1"==e?t=[[1,1]]:"q4-top"==e?t="mobile"==this.device?[[320,50]]:[[728,90]]:"between-p"==e?t="desktop"==this.device?[[728,90]]:[[300,250],[320,50],[336,280],[320,100]]:"floating"==e?t=1200<=i?[[300,250],[300,600]]:728<=i?[[728,90]]:[[320,50]]:"adhesion-bottom"==e?t=1200<=i&&[[728,90]]:"adhesion-top"==e?(t=!1,"mobile"==this.device&&(t=[[320,50]])):t="mobile"==this.device||i<738?[[300,250],[320,50],[336,280],[320,100]]:"tablet"==this.device?[[300,250],[320,50],[336,280],[320,100],[728,90],[468,60]]:[[300,250],[728,90],[336,280],[320,100],[468,60]],t},LoopBid.prototype.loadGoogleAds=function(){Looper.executeLoadGoogleAds()},LoopBid.prototype.executeLoadGoogleAds=function(){var e={};this.renderEventHandlerAdded||(googletag.pubads().addEventListener("slotRenderEnded",this.dfpSlotRendered.bind(this)),this.renderEventHandlerAdded=!0),this.impressionEventHandlerAdded||(googletag.pubads().addEventListener("impressionViewable",this.dfpImpressionViewable.bind(this)),this.impressionEventHandlerAdded=!0),this.refreshVisibleAds&&!this.slotVisibilityChangedHandlerAdded&&(googletag.pubads().addEventListener("slotVisibilityChanged",this.slotVisibilityChanged.bind(this)),this.slotVisibilityChangedHandlerAdded=!0),this.updateW();for(var t=document.querySelectorAll(".google-ad-placeholder.loaded"),i=0;i<t.length;i++)!this.refreshVisibleAds||!t[i].id||void 0!==this.refreshTimers[t[i].id]&&this.refreshTimers[t[i].id].dfp||this.attachRefreshAd(t[i]);var o=this.wWidth,s=this.wTop,d=(this.wHeight,2500);Looper.firstLoad=!0;var r=document.querySelectorAll(".google-ad-placeholder:not(.between-p)"),a=document.querySelectorAll(".google-ad-placeholder.between-p"),n=[];n.push.apply(n,r),n.push.apply(n,a);var h=3;for("desktop"!=this.device&&(h=2),this.device,i=0;i<n.length;i++){var p=n[i].getBoundingClientRect(),l=n[i].getAttribute("data-ad-pos"),g=this.hasClass(n[i],"loaded"),f=this.hasClass(n[i],"emptied");p&&f&&(p.top<0&&-1250<p.top||0<p.top&&p.bottom<this.wHeight+d)?(this.removeClass(n[i],"emptied"),f=!1,Looper.isDev&&console.log("Un-emptied: "+n[i].id)):g&&"between-p"==l&&p&&(p.top<0&&p.top<0-d||0<p.top&&p.bottom>this.wHeight+3750)&&(n[i].innerHTML="",n[i].removeAttribute("data-google-query-id"),this.addClass(n[i],"emptied"),this.removeClass(n[i],"loaded"),this.removeClass(n[i],"prebid"),this.removeClass(n[i],"prebid-reloaded"),googletag.destroySlots([googletag.definedSlots[n[i].id]]),delete googletag.definedSlots[n[i].id],delete googletag.displayedSlots[n[i].id],f=!0,Looper.isDev&&console.log("Emptied: "+n[i].id));var c,u,m,v=document.querySelectorAll(".google-ad-placeholder.between-p.loaded");g||f||!(10<=s&&v.length<h||p.top<0&&-1250<p.top||p&&0<p.top&&p.bottom<this.wHeight+d||"floating"==l||"adhesion-top"==l||"adhesion-bottom"==l)||(u=!1,(c=this.getBidSizes(l))||(this.addClass(n[i],"loaded"),u=!0),f=!(g="inArt"),"1x3"==l?g="1x3":"1x1"==l&&(this.bidOneByOne||(this.addClass(n[i],"loaded"),u=!0)),u||((v=n[i].getAttribute("id"))||(v="adslot-"+this.dynamicAd,n[i].id=v,f=!0),p=!1,l&&(p="inf-",p+=this.device+"-","tablet"==this.device&&(p+=738<=o?"portrait-":"landscape-"),p+=l,"sidebar"==l&&(p+="-bottom")),u=["Infinite-Gallery"],this.adTypeAdd&&u.push(this.adTypeAdd),void 0!==googletag.definedSlots[v]&&googletag.definedSlots[v]||(l=this.dfpId,void 0!==this.useBidPosAdSlot&&(l+="/"+p),googletag.definedSlots[v]=googletag.defineSlot(l,c,v).addService(googletag.pubads())),void 0!==googletag.definedSlots[v]&&googletag.definedSlots[v]&&(googletag.definedSlots[v].setTargeting("pos",g).setTargeting("bidpos",p).setTargeting("adslot",v).setTargeting("pageType",u),void 0!==this.zergCat&&this.zergCat&&googletag.definedSlots[v].setTargeting("zcat",this.zergCat)),f&&this.dynamicAd++,(u={})[v]=c,f=this.getPrebidBidders(u),m=this.getPrebidAdUnits(u,f),pbjs.que.push((function(){pbjs.addAdUnits(m)})),e[v]=c,this.addClass(n[i],"loaded"),Looper.isDev&&console.log("ID: "+v)))}a=this.getCount(e),"function"==typeof this.runAuction&&0<a&&this.runAuction(e)},LoopBid.prototype.getPrebidAdUnits=function(e,t){var i,o={};for(i in e)if(e.hasOwnProperty(i))for(var s in t)if(t.hasOwnProperty(s)){var d=t[s];if(d.hasOwnProperty(i)){o.hasOwnProperty(i)||(o[i]=[]);for(var r=0;r<d[i].length;r++)o[i].push(d[i][r])}}var a=[];for(i in e)e.hasOwnProperty(i)&&void 0!==o[i]&&a.push({code:i,mediaTypes:{banner:{sizes:e[i]}},bids:o[i]});return a},LoopBid.prototype.getKargoPrebid=function(e){var t={};if("desktop"!=Looper.device)for(var i in e)if(e.hasOwnProperty(i)){var o=document.getElementById(i),s=!1;o&&(s=o.getAttribute("data-ad-pos"));for(var d=0;d<e[i].length;d++){var r=e[i][d].join("x");void 0!==this.kargoSlots[r]&&(s&&"floating"==s&&"320x50"!=r||"q4-top"==s||"between-p"==s&&"300x250"!=r||(void 0===t[i]&&(t[i]=[]),t[i].push({bidder:"kargo",params:{placementId:this.kargoSlots[r]}})))}}return t},LoopBid.prototype.getIndexExchangePrebid=function(e){var t,i={};for(t in e)if(e.hasOwnProperty(t))for(var o=0;o<e[t].length;o++){var s=e[t][o].join("x");void 0!==this.indexTags[s]&&(void 0===i[t]&&(i[t]=[]),i[t].push({bidder:"ix",params:{siteId:this.indexTags[s]}}))}return i},LoopBid.prototype.getAppNexusPrebid=function(e){var t,i={};for(t in e)if(e.hasOwnProperty(t))for(var o=0;o<e[t].length;o++){var s=e[t][o].join("x");void 0!==this.xandrTags[s]&&(void 0===i[t]&&(i[t]=[]),i[t].push({bidder:"appnexus",params:{placementId:this.xandrTags[s]}}))}return i},LoopBid.prototype.getOpenXPrebid=function(e){var t,i=[];for(t in e)e.hasOwnProperty(t)&&(void 0===i[t]&&(i[t]=[]),i[t].push({bidder:"openx",params:{unit:this.openXUnit,delDomain:"zergnet-d.openx.net"}}));return i},LoopBid.prototype.getCriteoPrebid=function(e){var t,i=[];for(t in e)e.hasOwnProperty(t)&&(void 0===i[t]&&(i[t]=[]),i[t].push({bidder:"criteo",params:{networkId:11522}}));return i},LoopBid.prototype.getSharethroughPrebid=function(e){var t,i=[];for(t in e)if(e.hasOwnProperty(t)){void 0===i[t]&&(i[t]=[]);for(var o=0;o<e[t].length;o++){var s=e[t][o].join("x");void 0!==this.sharethroughTags[s]&&(void 0===i[t]&&(i[t]=[]),i[t].push({bidder:"sharethrough",params:{pkey:this.sharethroughTags[s]}}))}}return i},LoopBid.prototype.getGourmetAdsPrebid=function(e){var t,i={};for(t in e)if(e.hasOwnProperty(t))for(var o=0;o<e[t].length;o++){var s=e[t][o].join("x");void 0!==this.gourmetTags[s]&&(void 0===i[t]&&(i[t]=[]),i[t].push({bidder:"gourmetads",params:{placementId:this.gourmetTags[s],usePaymentRule:!0}}))}return i},LoopBid.prototype.getPubmaticPrebid=function(e){var t,i=[];for(t in e)if(e.hasOwnProperty(t))for(var o=0;o<e[t].length;o++){var s=e[t][o].join("x");void 0!==this.pubmaticTags[s]&&(void 0===i[t]&&(i[t]=[]),i[t].push({bidder:"pubmatic",params:{publisherId:"159932",adSlot:this.pubmaticTags[s]}}))}return i},LoopBid.prototype.getRubiconPrebid=function(e){var t,i=[];for(t in e)if(e.hasOwnProperty(t))for(var o=0;o<e[t].length;o++){var s=e[t][o].join("x");void 0!==this.rubiconTags[this.device]&&void 0!==this.rubiconTags[this.device][s]&&(void 0===i[t]&&(i[t]=[]),i[t].push({bidder:"rubicon",params:{accountId:24216,siteId:this.rubiconTags[this.device].site,zoneId:this.rubiconTags[this.device][s]}}))}return i},LoopBid.prototype.getTripleLiftPrebid=function(e){var t,i=[];for(t in e)if(e.hasOwnProperty(t))for(var o=0;o<e[t].length;o++){var s=e[t][o].join("x");void 0!==this.tripleLiftTags[s]&&(void 0===i[t]&&(i[t]=[]),i[t].push({bidder:"triplelift",params:{inventoryCode:this.tripleLiftTags[s]}}))}return i},LoopBid.prototype.getYahooPrebid=function(e){var t,i=[];for(t in e)if(e.hasOwnProperty(t))for(var o=0;o<e[t].length;o++){var s=e[t][o].join("x");void 0!==this.yahooTags[s]&&(void 0===i[t]&&(i[t]=[]),i[t].push({bidder:"yahoossp",params:{dcn:this.yahooTags.site,pos:this.yahooTags[s]}}))}return i},LoopBid.prototype.finalizeAuction=function(e){var t,i;for(t in e)e.hasOwnProperty(t)&&(i=document.getElementById(t),void 0!==googletag.displayedSlots[t]&&googletag.displayedSlots[t]?(Looper.isDev&&console.log("Refresh: "+t),googletag.pubads().refresh([googletag.definedSlots[t]]),i&&Looper.addClass(i,"prebid-reloaded")):(Looper.isDev&&console.log("Display: "+t),googletag.display(t),googletag.displayedSlots[t]=1,i&&Looper.addClass(i,"loaded")),!this.refreshVisibleAds||!i.id||void 0!==this.refreshTimers[i.id]&&this.refreshTimers[i.id].dfp||this.attachRefreshAd(i,!1,!1))},LoopBid.prototype.prebidRefresh=function(e){this.expectBid("prebid");var t,i=[];for(t in e)e.hasOwnProperty(t)&&i.push(t);pbjs.que.push((function(){pbjs.requestBids({timeout:1500,adUnitCodes:i,bidsBackHandler:function(e,t,i,o,s){pbjs.setTargetingForGPTAsync(),Looper.registerBid("prebid")}})}))},LoopBid.prototype.checkAuction=function(e,t,i){i=parseInt(i),!isNaN(i)&&null!==i||(i=0),Object.keys(Looper.timeKeyBiddersExpected).length&&Object.keys(Looper.timeKeyBiddersExpected).length==Object.keys(Looper.timeKeyBiddersReceived).length||3<=i?Looper.finalizeAuction(e):(Looper.isDev&&console.log("Not enough bids, try again: "+i),Looper.auctionTimeout[t]=setTimeout((function(){Looper.checkAuction(e,t,i+1)}),250))},LoopAds.prototype=Object.create(LoopBid.prototype),Object.defineProperty(LoopAds.prototype,"constructor",{}),LoopAds.prototype.getPrebidBidders=function(e){var t={};return t.kargo=this.getKargoPrebid(e),t.indexExchange=this.getIndexExchangePrebid(e),t.appNexus=this.getAppNexusPrebid(e),t.openX=this.getOpenXPrebid(e),t.pubmatic=this.getPubmaticPrebid(e),t.rubicon=this.getRubiconPrebid(e),t.yahoo=this.getYahooPrebid(e),t.sharethrough=this.getSharethroughPrebid(e),t},LoopAds.prototype.runAuction=function(e,t){var i="";for(adId in e)i&&(i+="_"),i+=adId;i=i+"_"+Math.floor((new Date).getTime()),this.requestAmazonDealsBid(e,0,i),this.prebidRefresh(e),this.checkAuctionCallback=function(e,t,i){this.checkAuction(e,t,i)}.bind(this),this.auctionTimeout[i]=setTimeout(this.checkAuction.bind(this,e,i,t),500)},LoopAds.prototype.requestAmazonV2Bid=function(e,t,i){var o,s=[],d=this.device;for(o in d+="-inf-",e)s.push({slotID:d+o,sizes:e[o]});this.expectBid("amazon"),"undefined"!=typeof apstag&&void 0!==apstag.fetchBids&&apstag.fetchBids({slots:s,timeout:2e3},(function(e,i){Looper.registerBid("amazon"),e.forEach((function(e){var i;void 0!==e.slotID&&(i=e.slotID.replace(/[a-zA-Z-]+adslot/,"adslot"),-1!==e.slotID.indexOf("div-ad-floating")?i=i.substring(e.slotID.indexOf("div-ad-floating")):-1!==e.slotID.indexOf("div-ad-adhesion")&&(i=i.substring(e.slotID.indexOf("div-ad-adhesion"))),googletag.definedSlots[i]&&(googletag.definedSlots[i].setTargeting("amznbid",e.amznbid),googletag.definedSlots[i].setTargeting("amzniid",e.amzniid),void 0!==e.amznsz&&googletag.definedSlots[i].setTargeting("amznsz",e.amznsz),void 0!==e.amznp&&googletag.definedSlots[i].setTargeting("amznp",e.amznp))),"function"==typeof t&&t.call()}))}))},LoopAds.prototype.requestAmazonDealsBid=function(e,t,i){var o,s=[],d=this.device;for(o in d+="-inf-",e){s.push({slotID:d+o,sizes:e[o]});var r,a=googletag.definedSlots[o].getTargetingKeys();for(r in a)a.hasOwnProperty(r)&&-1!==r.indexOf("amzn")&&googletag.definedSlots[o].clearTargeting(r)}this.expectBid("amazon"),"undefined"!=typeof apstag&&void 0!==apstag.fetchBids&&apstag.fetchBids({slots:s,timeout:2e3},(function(e,i){Looper.registerBid("amazon"),e.forEach((function(e){if(void 0!==e.slotID){var i=e.slotID.replace(/[a-zA-Z-]+adslot/,"adslot");if(-1!==e.slotID.indexOf("div-ad-floating")?i=i.substring(e.slotID.indexOf("div-ad-floating")):-1!==e.slotID.indexOf("div-ad-adhesion")&&(i=i.substring(e.slotID.indexOf("div-ad-adhesion"))),googletag.definedSlots[i])for(var o in e.targeting)e.targeting.hasOwnProperty(o)&&-1!==o.indexOf("amzn")&&googletag.definedSlots[i].setTargeting(o,e.targeting[o])}"function"==typeof t&&t.call()}))}))};